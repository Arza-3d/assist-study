<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://image.ibb.co/nqbdHJ/titlelogo.png" rel="icon">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <link href="https://raw.githack.com/Arza-3d/ar3.js/master/stylesheets/ar3.min.css" rel="stylesheet" type="text/css">

  <title>Assist</title>
  <script>

    function getLastOfType(myHTMLTag) {
      let myLastElementNode,
      elementArray;
      elementArray = document.querySelectorAll(myHTMLTag);
      myLastElementNode = elementArray[elementArray.length - 1];
      return myLastElementNode;
    }

    let inputCount = 0;
    let lastInput;
    let inputParent;

    function getInputParent() {
      
      return lastInput.parentElement;
    }

    function setOutput() {
      
      inputParent.innerHTML += "<pre id = 'output"+ inputCount +"'>...</pre>";
    }

    function setCopyButton() {

      inputParent.innerHTML += "<button id='button"+inputCount+"' onclick='copyText("+'"input'+inputCount +'"'+")' data-count="+inputCount+">copy</button>";
    }

    function copyText(targetId) {
      
      let myText = document.getElementById(targetId).innerHTML;
      navigator.clipboard.writeText(myText);
    }

    function setInputAndOutput(myFunction) {
      
      lastInput = getLastOfType("textarea");
      lastInput.id = "input" + inputCount;
      lastInput.dataset.count = inputCount;
      
      //alert(myFunction);
      if (myFunction != undefined) {
        lastInput.addEventListener("onchange", myFunction);
        alert("addEventListener " + myFunction);
      }
      
      inputParent = getInputParent();
      
      setOutput();

      setCopyButton();

      inputCount++;
      
      
      //alert(lastInput);
      alert("fungsinya "+lastInput.onkeyup)
      
      //myFunction();
      
      
    }

  </script>

</head>
<body
  data-repo-r3="https://github.com/Arza-3d/doc-css"
  data-headers-r3="> div > h2| > div > h3| div > section > h4"
  >
  <script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3header.js"></script>
  <header>
    <h1>assist nyatet</h1>
    <h4>assist nyatet macem2 bahasa pemrograman</h4>
    <table>
      <tr>
        <td>project repo</td>
        <td><a href="https://github.com/Arza-3d/doc-css">https://github.com/Arza-3d/doc-js-css</a></td>
      </tr>
    </table>

    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
    </p>
  </header>
  <main class="aside-nav-target-r3">

    <div data-title-r3="bantu catatan html">

      <h2>assist dokumen html</h2>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      </p>

      <h3>ganti tag jadi &amp;gt;</h3>
      <section>
        <p>
          Konversi tag jadi &amp;gt;
        </p>
        <textarea></textarea>
      <script>
        function changeTag(myText) {
          let newText = "";

          newText = myText.replace(/</g, "&amp;lt;");
          newText = newText.replace(/>/g, "&amp;gt;");
          newText = newText.replace(/\n/g, "<br>&lt;br&gt;");
          newText = newText.replace(/ /g, "&amp;nbsp;");

          return newText;
        }
        
        function replaceTag() {
          
          myInputCount = this.dataset.count;
          
          let input1 = document.getElementById("input"+ myInputCount);
          
          let result1 = document.getElementById("result"+ myInputCount);

          let input1Text = input1.value;

          let newText = changeTag(input1Text);

          result1.innerHTML = newText;
        }
        
        function tess2() {
          
        }
        
        setInputAndOutput(tess2);
        
      </script>
    </section>

    <h3>test2</h3>
    <section>
      <textarea></textarea>
      <script>
        setInputAndOutput();
      </script>
    </section>

  </div>

</main>

<script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3.min.js"></script>
<script type="text/javascript" charset="utf-8">

  lastInput.addEventListener("onkeyup", tess3);
  lastInput.setAttribute("onkeyup", "tess3()");
  alert(lastInput.tagName);
  alert(lastInput.onkeyup);
  
  function tess3() {
   alert("lol");
}

</script>

</body>
</html>