<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://image.ibb.co/nqbdHJ/titlelogo.png" rel="icon">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <link href="https://raw.githack.com/Arza-3d/ar3.js/master/stylesheets/ar3.min.css" rel="stylesheet" type="text/css">

  <title>Assist</title>
  <script>
    
    //================
    // Global Function
    //================

    function getInput(myCount) {
      return document.getElementById("input" + myCount);
    }

    function getInputValue(myCount) {
      return getInput(myCount).value;
    }

    function getOutput(myCount) {
      return document.getElementById("output" + myCount);
    }

    function getRealOutput(myCount) {
      return document.getElementById("realOutput" + myCount);
    }

    function getRealOutputValue(myCount) {
      return getRealOutput(myCount).value;
    }

    function setRealOutput(myCount, newText) {
      getRealOutput().value = newText;
    }
  </script>
  
  <script>
  //=====
  //EVENT
  //=====
  
    function copyElemForMobile(thisElem) {
      thisElem.select();
      thisElem.setSelectionRange(0, 99999);
      document.execCommand("copy");
    }

    function copyText() {

      let myCount = this.dataset.count;
      let myInput = getInput(myCount);
      // for mobile
      copyElemForMobile(getInput(myCount));
      myInput.select();
      myInput.setSelectionRange(0, 99999);
      document.execCommand("copy");

      alert(getInputValue(myCount));

      // for PC
      //navigator.clipboard.writeText(getInputValue(myCount));
    }
    
    function inputIn() {

      let myCount = this.dataset.count;

      let inputText = getInputValue(myCount);

      let newText = inputFunctions[myCount](inputText);

      // save input function output
      setRealOutput(myCount, newText);

      // display function output
      let displayedText = changeTagForDisplay(newText);
      
      getOutput(myCount).innerHTML = displayedText;
    }
  </script>
  
  <script>
  //=================
  // DISPLAY FUNCTION
  //=================
    function changeTag(myText) {
      let newText = "";

      newText = myText.replace(/</g, "&amp;lt;");
      newText = newText.replace(/>/g, "&amp;gt;");
      newText = newText.replace(/\n/g, "<br>&lt;br&gt;");
      newText = newText.replace(/ /g, "&amp;nbsp;");

      return newText;
    }
    
    function changeTagForDisplay(myText) {
      const wordChange = [
        ['<', 'lt'],
        ['>', 'gt'],
        ['&', 'amp'],
        [' ', 'nbsp'],
        ['\n', '<br>'],
        ['\t', '#9']
        ];
      
      let newText = '';
      
      for (let i = 0; i < wordChange.length; i++) {
        let myOldWord = new RegExp(wordChange[i][0], 'g');
        let myNewWord = (wordChange[i][0] != '\n') ? '&' + wordChange[i][1] + ';' : wordChange[i][1];
        
        newText = myText.replace(myOldWord, myNewWord)
      }
      
      /*
      newText = myText.replace(/</g, "&amp;lt;");
      newText = newText.replace(/>/g, "&amp;gt;");
      newText = newText.replace(/\n/g, "<br>&lt;br&gt;");
      newText = newText.replace(/ /g, "&amp;nbsp;");
      */

      return newText;
    }

  </script>

  <script>
    //================
    // CUSTOM FUNCTION
    //=================
    
    function replaceTag() {
      let myCount = this.dataset.count;

      getOutput(myCount).innerHTML = changeTag(getInputValue(myCount));
    }

    function empF () {
      alert("empty func");
    }

    const inputFunctions =
    [
      replaceTag,
      empF
    ];
  </script>




</head>
<body
  data-repo-r3="https://github.com/Arza-3d/doc-css"
  data-headers-r3="> div > h2| > div > h3| div > section > h4"
  >
  <script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3header.js"></script>
  <header>
    <h1>assist nyatet</h1>
    <h4>assist nyatet macem2 bahasa pemrograman</h4>
    <table>
      <tr>
        <td>project repo</td>
        <td><a href="https://github.com/Arza-3d/doc-css">https://github.com/Arza-3d/doc-js-css</a></td>
      </tr>
    </table>

    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
    </p>
  </header>
  <main class="aside-nav-target-r3">

    <div data-title-r3="bantu catatan html">

      <h2>assist dokumen html</h2>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      </p>

      <h3>ganti tag jadi &amp;gt;</h3>
      <section>
        <p>
          Konversi tag jadi &amp;gt;
        </p>
        <textarea></textarea>

      </section>

      <h3>test2</h3>
      <section>
        <textarea></textarea>
      </section>

      <h3>test 3</h3>
      <section>
        <textarea></textarea>

        <h1 data-count="5" id="tesH1">get count</h1>
        <script type="text/javascript" charset="utf-8">
          let tesH1 = document.getElementById("tesH1");
          tesH1.addEventListener("click", getInput);
        </script>
      </section>

    </div>

  </main>

  <script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3.min.js"></script>
  <script>
    let $input = $("textarea");

    for (let i = 0; i < $input.length; i++) {
      $input[i].id = "input" + i;
      $input[i].dataset.count = i;
      $($input[i]).after(
        "<pre id='output"+i+"' data-count='"+i+"'> ini output ke "+ i +" </pre>")
      .after(`<br>
        <button
        id="copy` + i +
        `" data-count=` + i +
        `>
        copy
        </button><br>`);

      //  create saved input container
      $($input[i]).after('<textarea id="realOutput'+i+'" style="display:none" data-count="'+i+'"></textarea>');
    }

    let $buttons = $("button");
    for (let i = 0; i < $buttons.length; i++) {
      let button = document.getElementById("copy" + i);
      button.addEventListener("click", copyText);
    }


    for (let i = 0; i < $input.length; i++) {
      let myInput = document.getElementById("input" + i);

        myInput.addEventListener("keyup", 
        inputIn
        //inputFunctions[i]
        );
    }
  </script>

  <script>

    

  </script>

</body>
</html>